# RickyGB é¡¹ç›®ç»“æ„ - åˆç†é‡æ„æ–¹æ¡ˆ

## ğŸ“ å½“å‰ç›®å½•ç»“æ„

```
/workspaces/RickyGB/
â”œâ”€â”€ README.md                    # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ README_HEARTBEAT.md          # å¿ƒè·³æ£€æµ‹æ–‡æ¡£
â”œâ”€â”€ README_PDF_SPLITTER.md       # PDFæ‹†åˆ†å·¥å…·æ–‡æ¡£
â”œâ”€â”€ TESTING.md                   # æµ‹è¯•æ–‡æ¡£
â”œâ”€â”€ TODO.md                      # å¾…åŠäº‹é¡¹
â”œâ”€â”€ requirements.txt             # åŸºç¡€ä¾èµ–
â”œâ”€â”€ requirements_epub.txt        # EPUBå·¥å…·ä¾èµ–
â”œâ”€â”€ requirements_pdf_splitter.txt # PDFå·¥å…·ä¾èµ–
â”œâ”€â”€ requirements_all.txt         # å®Œæ•´ä¾èµ–ï¼ˆæ–°å¢ï¼‰
â”‚
â”œâ”€â”€ utils/                       # å·¥å…·æ¨¡å—ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ file_utils.py           # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â””â”€â”€ logging_utils.py        # æ—¥å¿—å·¥å…·
â”‚
â”œâ”€â”€ memory/                      # é¡¹ç›®è®°å¿†
â”‚   â””â”€â”€ 2026-01-31.md
â”‚
â”œâ”€â”€ __pycache__/                 # Pythonç¼“å­˜
â”œâ”€â”€ venv/                        # è™šæ‹Ÿç¯å¢ƒ
â”‚
â””â”€â”€ è„šæœ¬æ–‡ä»¶ (*.py)              # æ‰€æœ‰åŠŸèƒ½è„šæœ¬
```

## ğŸ”§ å·¥å…·æ¨¡å—è¯´æ˜

### `utils/` ç›®å½•
æä¾›å…±äº«çš„å·¥å…·å‡½æ•°ï¼Œé¿å…ä»£ç é‡å¤ï¼š

1. **`file_utils.py`** - æ–‡ä»¶æ“ä½œå·¥å…·
   - `ensure_directory()` - ç¡®ä¿ç›®å½•å­˜åœ¨
   - `safe_read_file()` - å®‰å…¨è¯»å–æ–‡ä»¶ï¼ˆå¤šç¼–ç æ”¯æŒï¼‰
   - `safe_write_file()` - å®‰å…¨å†™å…¥æ–‡ä»¶ï¼ˆè‡ªåŠ¨å¤‡ä»½ï¼‰
   - `get_file_hash()` - è®¡ç®—æ–‡ä»¶å“ˆå¸Œ
   - `find_files()` - æŸ¥æ‰¾åŒ¹é…æ–‡ä»¶
   - `validate_file_type()` - éªŒè¯æ–‡ä»¶ç±»å‹

2. **`logging_utils.py`** - æ—¥å¿—å·¥å…·
   - `setup_logging()` - ç»Ÿä¸€æ—¥å¿—é…ç½®
   - `get_logger()` - è·å–loggerå®ä¾‹
   - `ProgressTracker` - è¿›åº¦è·Ÿè¸ªå™¨

3. **`__init__.py`** - æ¨¡å—å¯¼å‡º
   - é‡æ–°å¯¼å‡º`json_utils.py`çš„åŠŸèƒ½
   - å¯¼å‡ºæ–‡ä»¶å·¥å…·å’Œæ—¥å¿—å·¥å…·

## ğŸ“ è„šæœ¬åˆ†ç±»

### æ ¸å¿ƒå·¥å…·
1. **Excelå¤„ç†**
   - `xlsx2md.py` - åŸå§‹ç‰ˆæœ¬ï¼ˆä¿æŒå…¼å®¹ï¼‰
   - `xlsx2md_improved.py` - æ”¹è¿›ç‰ˆæœ¬ï¼ˆä½¿ç”¨å·¥å…·æ¨¡å—ï¼‰

2. **PDFå¤„ç†**
   - `pdf_chapter_splitter_v1.py` - åŸºç¡€ç‰ˆæœ¬
   - `pdf_chapter_splitter_v2.py` - OCRé›†æˆç‰ˆæœ¬
   - `pdf_chapter_splitter_final.py` - æœ€ç»ˆç‰ˆæœ¬
   - `pdf_ocr_module.py` - OCRæ¨¡å—
   - `pdf_ocr_processor.py` - OCRå¤„ç†å™¨
   - `pdf_chapter_detector.py` - ç« èŠ‚æ£€æµ‹å™¨
   - `pdf_batch_processor.py` - æ‰¹é‡å¤„ç†å™¨

3. **EPUBå¤„ç†**
   - `epub_to_markdown_v1.py` - åŸºç¡€ç‰ˆæœ¬ï¼ˆSprint 1å®Œæˆï¼‰

4. **Markdownå¤„ç†**
   - `merge_markdown.py` - Markdownæ–‡ä»¶åˆå¹¶

5. **JSONå¤„ç†**
   - `json_utils.py` - JSONå·¥å…·ï¼ˆå·²ç§»åŠ¨åˆ°utilsï¼‰
   - `json_safe_wrapper.py` - JSONå®‰å…¨åŒ…è£…å™¨
   - `json_final_fix.py` - JSONæœ€ç»ˆä¿®å¤
   - `check_json_issues.py` - JSONé—®é¢˜æ£€æŸ¥

6. **å¿ƒè·³æ£€æµ‹**
   - `gateway_heartbeat.py` - å¿ƒè·³æ£€æµ‹ä¸»è„šæœ¬
   - `manage_heartbeat.sh` - ç®¡ç†è„šæœ¬
   - `run_heartbeat_background.sh` - åå°è¿è¡Œè„šæœ¬
   - `setup_heartbeat.sh` - å®‰è£…è„šæœ¬

### æµ‹è¯•è„šæœ¬
- `test_basic.py` - åŸºç¡€æµ‹è¯•
- `test_merge_markdown.py` - Markdownåˆå¹¶æµ‹è¯•
- `test_sprint_*.py` - å„å†²åˆºæµ‹è¯•
- `test_sprint_epub_1.py` - EPUBå·¥å…·æµ‹è¯•

### è¾…åŠ©è„šæœ¬
- `create_sample_data.py` - åˆ›å»ºæµ‹è¯•æ•°æ®
- `commit_changes.sh` - Gitæäº¤è„šæœ¬

## ğŸ¯ é‡æ„åŸåˆ™

### 1. ä¿æŒå‘åå…¼å®¹
- ä¸åˆ é™¤æˆ–é‡å‘½åç°æœ‰è„šæœ¬
- æ–°åŠŸèƒ½åˆ›å»ºæ–°æ–‡ä»¶ï¼ˆå¦‚`xlsx2md_improved.py`ï¼‰
- é€æ­¥è¿ç§»ï¼Œä¸ä¸€æ¬¡æ€§æ›¿æ¢

### 2. ä»£ç å¤ç”¨
- å…¬å…±åŠŸèƒ½æå–åˆ°`utils/`æ¨¡å—
- é¿å…é‡å¤çš„ä»£ç é€»è¾‘
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—

### 3. æ¸è¿›å¼æ”¹è¿›
- å…ˆä¿®å¤æ˜æ˜¾é—®é¢˜ï¼ˆå¦‚JSONåºåˆ—åŒ–ï¼‰
- å†æ”¹è¿›ä»£ç ç»“æ„
- æœ€åä¼˜åŒ–æ€§èƒ½

### 4. æ–‡æ¡£åŒæ­¥
- ä»£ç ä¿®æ”¹æ—¶æ›´æ–°ç›¸å…³æ–‡æ¡£
- ä¿æŒREADMEæ–‡ä»¶æœ€æ–°
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š

## ğŸ”„ è¿ç§»è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€å·¥å…·æ¨¡å— âœ…
- [x] åˆ›å»º`utils/`ç›®å½•
- [x] å®ç°æ–‡ä»¶æ“ä½œå·¥å…·
- [x] å®ç°æ—¥å¿—å·¥å…·
- [x] ä¿®å¤`xlsx2md.py`çš„JSONé—®é¢˜
- [x] åˆ›å»ºæ”¹è¿›ç‰ˆ`xlsx2md_improved.py`

### ç¬¬äºŒé˜¶æ®µï¼šPDFå·¥å…·æ”¹è¿›
- [ ] åˆ†æPDFå·¥å…·ä¸­çš„é‡å¤ä»£ç 
- [ ] æå–å…¬å…±åŠŸèƒ½åˆ°å·¥å…·æ¨¡å—
- [ ] åˆ›å»ºæ”¹è¿›ç‰ˆPDFå·¥å…·
- [ ] ä¿æŒåŸæœ‰åŠŸèƒ½ä¸å˜

### ç¬¬ä¸‰é˜¶æ®µï¼šEPUBå·¥å…·å®Œæˆ
- [ ] å®ŒæˆEPUBå·¥å…·çš„Sprint 2-4
- [ ] ä½¿ç”¨å·¥å…·æ¨¡å—é‡æ„
- [ ] æ·»åŠ å®Œæ•´çš„æµ‹è¯•

### ç¬¬å››é˜¶æ®µï¼šå…¶ä»–å·¥å…·æ•´åˆ
- [ ] æ”¹è¿›Markdownåˆå¹¶å·¥å…·
- [ ] æ•´åˆJSONå·¥å…·å¥—ä»¶
- [ ] é‡æ„å¿ƒè·³æ£€æµ‹ç³»ç»Ÿ

## ğŸ’¡ ä½¿ç”¨æŒ‡å—

### å¼€å‘æ–°å·¥å…·
```python
# 1. å¯¼å…¥å·¥å…·æ¨¡å—
from utils import (
    safe_read_file, safe_write_file,
    setup_logging, get_logger, ProgressTracker
)

# 2. è®¾ç½®æ—¥å¿—
logger = get_logger(__name__)

# 3. ä½¿ç”¨å·¥å…·å‡½æ•°
def process_file(input_path, output_path):
    content = safe_read_file(input_path)
    # å¤„ç†é€»è¾‘
    safe_write_file(output_path, processed_content)
```

### æ”¹è¿›ç°æœ‰è„šæœ¬
1. **è¯†åˆ«é‡å¤ä»£ç ** - æŸ¥æ‰¾å¯ä»¥æå–åˆ°å·¥å…·æ¨¡å—çš„éƒ¨åˆ†
2. **å¯¼å…¥å·¥å…·æ¨¡å—** - æ›¿æ¢åŸæœ‰çš„é‡å¤å®ç°
3. **æ·»åŠ æ—¥å¿—** - ä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—ç³»ç»Ÿ
4. **ä¿æŒå…¼å®¹** - ä¸æ”¹å˜åŸæœ‰çš„å‡½æ•°æ¥å£
5. **æµ‹è¯•éªŒè¯** - ç¡®ä¿åŠŸèƒ½ä¸å˜

### ä¾èµ–ç®¡ç†
```bash
# å®‰è£…åŸºç¡€ä¾èµ–
pip install -r requirements.txt

# å®‰è£…ç‰¹å®šå·¥å…·ä¾èµ–
pip install -r requirements_pdf_splitter.txt

# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements_all.txt
```

## ğŸ“Š ä»£ç è´¨é‡æŒ‡æ ‡

### å·²æ”¹è¿›çš„æ–¹é¢
1. **JSONå¤„ç†** - ä½¿ç”¨å®‰å…¨çš„JSONåºåˆ—åŒ–
2. **æ–‡ä»¶æ“ä½œ** - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå¤šç¼–ç æ”¯æŒ
3. **æ—¥å¿—ç³»ç»Ÿ** - ç»“æ„åŒ–çš„æ—¥å¿—è¾“å‡º
4. **ä»£ç å¤ç”¨** - å‡å°‘é‡å¤ä»£ç 

### å¾…æ”¹è¿›çš„æ–¹é¢
1. **ç±»å‹æ³¨è§£** - æ·»åŠ å®Œæ•´çš„ç±»å‹æç¤º
2. **å•å…ƒæµ‹è¯•** - å¢åŠ æµ‹è¯•è¦†ç›–ç‡
3. **æ€§èƒ½ä¼˜åŒ–** - å¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ–
4. **é”™è¯¯å¤„ç†** - æ›´å®Œå–„çš„å¼‚å¸¸å¤„ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ç°æœ‰è„šæœ¬
```bash
# Excelè½¬Markdown
python xlsx2md.py -i input.xlsx -o output.md

# PDFç« èŠ‚æ‹†åˆ†
python pdf_chapter_splitter_final.py -i document.pdf -o chapters

# EPUBè½¬æ–‡æœ¬
python epub_to_markdown_v1.py -i book.epub -o text_output
```

### ä½¿ç”¨æ”¹è¿›ç‰ˆè„šæœ¬
```bash
# æ”¹è¿›ç‰ˆExcelè½¬Markdown
python xlsx2md_improved.py -i input.xlsx -o output.md -v

# æŸ¥çœ‹å¸®åŠ©
python xlsx2md_improved.py --help
```

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements_all.txt

# è¿è¡Œæµ‹è¯•
python test_basic.py
```

## ğŸ“ æ”¯æŒ

- **é—®é¢˜æŠ¥å‘Š**: æ£€æŸ¥ç°æœ‰è„šæœ¬æ˜¯å¦æ­£å¸¸å·¥ä½œ
- **åŠŸèƒ½è¯·æ±‚**: åŸºäºç°æœ‰æ¶æ„æ·»åŠ æ–°åŠŸèƒ½
- **ä»£ç è´¡çŒ®**: æŒ‰ç…§é‡æ„åŸåˆ™æ”¹è¿›ä»£ç 
- **æ–‡æ¡£æ›´æ–°**: ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥

---

**é¡¹ç›®çŠ¶æ€**: é‡æ„è¿›è¡Œä¸­ï¼ŒåŸºç¡€æ¶æ„å·²å»ºç«‹ï¼Œä¿æŒå‘åå…¼å®¹æ€§